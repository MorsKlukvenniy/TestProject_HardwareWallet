Тестовое задание для Hardware wallet

===========================================================================================================================================
ТЗ:
Аппаратная платформа: STM32
Программная платформа: FreeRTOS

Устройство имеет USART и SPI в режиме master. Необходимо реализовать двунаправленный шлюз USART ↔ SPI.

- Данные передаются сообщениями, протокол можно определить произвольно
- Сообщения на USART и SPI могут приходить асинхронно (у SPI slave устройства может возникнуть необходимость передать сообщение в любой момент)
- Работа с USART и SPI должна быть реализована в разных задачах

1) размер фрэйма динамический (значение длины 16 бит)
2) формат фрейма - строка (оканчиваются NULL), в SPI slave устройстве нет никаких внутренних регистров и прочих адресаций. Начиная с первого же байта оно начинает слать строку. Если устройству нечего передавать, то начиная с первого же байта оно шлет NULL. И также начиная с первого же байта оно принимает строку.
Со стороны уарта также приходят просто строки с символом \0 на  конце.
3) размер очереди - можете установить по 10 в обе стороны.
4) скорости - на ваше усмотрение

Результат - в виде Github репозитория.
===========================================================================================================================================

Ход выполенния:
1) Выбрал МК STM32 для которого есть примеры настройки переферии, так как ранее никогда не работал на МК STM32
2) Взял настройки SPI и USART из тестовых примеров, за исключением:
    а.   SpiHandle.Init.DataSize = SPI_DATASIZE_16BIT; //Значение длины SPI 16 бит, п.1 ТЗ
    б.   SpiHandle.Init.TIMode = SPI_TIMODE_ENABLED; // Из документаии следует, что в этом режиме бит CS всегда установлен, что необходимо для выполнения пункта ТЗ "(у SPI slave устройства может возникнуть необходимость передать сообщение в любой момент)"
    в.   UsartHandle.Init.BaudRate = 211000; //Для работы шлюза пропускная способность SPI и USART должна совпадать. сдеал расчёт изходя из настроект тактирования МК с учётом передачи служебных битов
3) Реализовал логику работы шлюза под управлением FreeRTOS.

Логика работы шлюза:
1) По заполению приёмного буфера вызывается CallBack функция (насколько я понял из документации HAL сама определяет по какому событию возникло прерывание и вызывает нужный обработчик).
Обработчик кладёт полученные данный в очеред потока обработки. SPI кладёт два сообщения по одному байту, USART склеивает два байта в одно сообщение и кладёт в очередь.
2) Потоки обработки бесконечно ждут сообщений в очередях от CallBack ф-ий. по получению сообщения из очереди проверяется оно анализируется на необходимость отправки, а именно:
Отправляются только действительные сообщения. Если отправлялась строка и пришёл пустой символ, то он отправлсяется как символ конца строки, а передача строки заканчивается.
Все дальнейшие пустые символы не отправляются. После приход действительного символа начается отправка новой строки.
